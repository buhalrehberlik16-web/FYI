/* ============================================================
   KARAKTER PANELİ GENEL YAPILANDIRMASI (U, I, K)
   ============================================================ */
#skill-book-screen, #stat-screen, #inventory-screen {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); 
    z-index: 3000;
    display: none; 
    justify-content: center; 
    align-items: center;
}

#skill-book-screen:not(.hidden), 
#stat-screen:not(.hidden), 
#inventory-screen:not(.hidden) { 
    display: flex !important; 
}

.stat-window, .skill-book-window, .inventory-window {
    background-color: #2b2b2b;
    border: 4px solid #6b5c3b;
    border-radius: 10px;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
    padding: 25px;
    position: relative;
    display: flex;
    flex-direction: column;
    font-family: 'Cinzel', serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #f0e68c;
}

/* X ÇIKIŞ BUTONU */
#btn-close-skill-book, #close-stat-screen, #btn-close-inventory {
    position: absolute; 
    top: 12px; 
    right: 12px;
    background: linear-gradient(to bottom, #8b0000, #5a0000); 
    border: 1px solid #ff4d4d; 
    color: #fff;
    width: 32px; 
    height: 32px; 
    cursor: pointer; 
    font-weight: bold;
    display: flex; 
    align-items: center; 
    justify-content: center; 
    z-index: 100;
    border-radius: 4px;
    box-shadow: 0 2px 5px #000;
}

#info-popup-content strong {
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
}

#info-popup-content span {
    color: #ccc;
    font-style: italic;
}

/* ============================================================
   STAT EKRANI (U) - DÜZELTİLMİŞ FONT VE RENK DÜZENİ
   ============================================================ */
.stat-row.main-info {
    display: flex !important;
    justify-content: space-between !important; /* İsmi sola, Level'ı sağa yaslar */
    align-items: baseline !important; /* Yazıların alt çizgisini hizalar */
    width: 100%;
    margin-bottom: 15px;
    flex-wrap: nowrap !important; /* Kesinlikle alt satıra geçme kuralı */
}



.stat-window {
    width: 610px;
    max-height: 85vh;
    overflow-y: auto;
	/* IE ve Edge için */
    -ms-overflow-style: none;  
    /* Firefox için */
    scrollbar-width: none;  
    background: linear-gradient(180deg, #2b2b2b 0%, #151515 100%) !important;
}
.stat-window::-webkit-scrollbar {
    display: none;
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #6b5c3b;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

.stat-window h2 { 
    margin: 0; 
    color: #f0e68c; 
    font-size: 1.5em; 
    text-align: center;
    flex-grow: 1; /* Başlığı ortalar */
}

/* Nickname ve Level Satırı */
.stat-main-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 0 5px;
    margin-bottom: 5px;
}
.stat-name-group { display: flex; align-items: baseline; gap: 8px; overflow: hidden;}
#stat-name { font-family: 'Cinzel', serif; text-transform: uppercase; color: #ffd700; font-size: 1.3em; font-weight: bold; text-shadow: 2px 2px 4px #000; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}
#stat-class { font-family: 'Cinzel', serif; text-transform: uppercase; color: #ffffff !important; font-size: 0.85em; margin-left: 5px; font-weight: normal; }
#stat-level { font-family: 'Cinzel', serif; text-transform: uppercase; color: #ffd700; font-weight: bold; font-size: 1.2em; white-space: nowrap !important; flex-shrink: 0 !important; margin-left: 10px !important; }

/* XP BARI */
.xp-bar-container { position: relative; width: 100%; height: 24px; background-color: #111; border: 1px solid #555; border-radius: 12px; margin-top: 5px; overflow: hidden; box-shadow: inset 0 0 8px #000; }
.xp-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #6a0dad, #9b59b6); box-shadow: 0 0 10px #9b59b6; transition: width 0.4s; }
.xp-bar-text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; font-size: 0.85em; font-weight: bold; color: #fff; text-shadow: 1px 1px 2px #000; z-index: 2; }

/* DAĞITILABİLİR PUAN */
.stat-points-box {
    margin-top: 15px; padding-top: 15px; border-top: 1px solid #6b5c3b;
    text-align: center; font-weight: bold; color: #f0e68c; font-size: 1.1em;
}

.stat-separator { border: 0; height: 1px; width: 100%; margin: 12px 0; background: linear-gradient(to right, transparent, #6b5c3b, transparent); }

/* SALDIRI / DEFANS TABLARI (Font Boyutu Düzeltildi) */
.combat-stats-row { display: flex; justify-content: space-between; gap: 20px; margin: 15px 0; }
.c-stat {
    flex: 1;
    padding: 12px;
    border-radius: 6px;
    text-align: center;
    border: 1px solid #444;
    box-shadow: inset 0 0 10px #000;
    font-weight: bold;
    padding: 8px; /* İç boşluğu azalttık */
    font-size: 0.9rem; /* Yazıyı hafif küçülttük */
}
.c-stat:first-child { background: linear-gradient(145deg, #2a0a0a, #100505); border-color: #8b0000; }
.c-stat:last-child { background: linear-gradient(145deg, #0a1a2a, #050a10); border-color: #004d8b; }

/* Değerlerin Font Boyutu (1.6'dan 1.3'e çekildi) */
.c-stat span { 
    display: block; 
    font-size: 1.3em; /* Değişiklik geldiğinde devleşmemesi için küçültüldü */
    margin-top: 5px; 
	font-family: 'Cinzel', serif; text-transform: uppercase;
}

/* ANA STATLAR (Değişiklik geldiğinde fontun sabit kalması için inherit eklendi) */
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
.stat-item { background: rgba(0,0,0,0.2); padding: 10px 5px; border: 1px solid #3e3221; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }
.stat-val-group { display: flex; align-items: center; gap: 10px; /* Sayı ile buton arasındaki boşluk */ min-width: 60px; /* Değerlerin genişliğini sabitlemek kaymayı önler */ justify-content: flex-end; flex-shrink: 0;}


#stat-str, #stat-dex, #stat-int, #stat-vit, #stat-mp, #stat-level-val {
    color: #ffd700; 
    font-weight: 900; 
    font-size: 1.1em; /* Sabit boyut */
    text-shadow: 1px 1px 0px #3e3221;
	display: inline-flex !important; /* İçindekileri (sayı ve bonus) yan yana diz */
    align-items: baseline;           /* Taban çizgisine göre hizala */
    gap: 6px;                        /* Sayı ile (+3) arasındaki boşluk */
    white-space: nowrap !important;  /* Alt satıra geçmeyi kesinlikle yasakla */
}

.stat-item label, .res-item label {
    font-family: 'Cinzel', serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #a89373; /* Pirinç rengi */
	flex: 1; /* İsim alabileceği kadar alanı alsın */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* Çok uzunsa (nadiren) sığmayan yeri üç nokta yapar */
    margin-right: 10px;
}

/* Renkli Spanların (Buff/Debuff) boyutunu ana yazıya eşitle */
.stat-item span span, .c-stat span span {
    font-size: 0.85em !important;    /* Parantez içini hafif küçültmek hizada tutmayı kolaylaştırır */
    display: inline-block;
    font-weight: inherit !important;
}

.btn-stat-plus { margin-left: 8px; background-color:#145a32; border: 1px solid #145a32; color: white; padding: 10px 10px; border-radius: 4px; cursor: pointer; transition: background-color 0.2s, transform 0.1s; text-transform: uppercase; font-weight: bold; font-family: 'Georgia', serif;}
.btn-stat-plus:hover:not(:disabled) { background-color: #145a00; filter: brightness(1.1); }

/* DİRENÇLER */
.res-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 5px; margin-top: 15px; }
.res-item { background: rgba(0,0,0,0.2); border: 1px solid #3e3221; border-radius: 6px; padding: 10px; display: flex; flex-direction: column; align-items: center; box-shadow: inset 0 0 5px #000; }
.res-item label { font-size: 0.75em; color: #888; margin-bottom: 2px; }
.res-item span:last-child { color: #ffd700; font-weight: bold; text-shadow: 1px 1px 0px #3e3221; font-size: 0.95em; }

.stat-footer { display: none; }

/* ============================================================
   ENVANTER (I) - NİHAİ YERLEŞİM
   ============================================================ */
.inventory-window { width: 620px; background-color: #1a1a1a; }
.inventory-header h3 { margin: 0; color: #f0e68c; font-size: 1.5em; text-align: center; border-bottom: 2px solid #6b5c3b; padding-bottom: 10px; margin-bottom: 15px; }
.inventory-content { display: flex; gap: 30px; justify-content: center; align-items: center; margin-bottom: 10px; }
.char-preview-box { width: 260px; height: 380px; position: relative; border: 1px dashed #6b5c3b; background: rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: flex-end; overflow: hidden; }
#inv-char-img { height: 100%; width: auto; object-fit: contain; transform: translateY(10px); filter: drop-shadow(0 0 10px #000); }
.brooch-overlay { position: absolute; top: 25%; left: 50%; transform: translateX(-50%); display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; width: 90px; z-index: 10; }
.brooch-slot { width: 26px !important; height: 26px !important; background-color: rgba(0, 0, 0, 0.7); border: 1px solid #6b5c3b; border-radius: 4px; }

.inventory-gold-display {
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
    margin: 15px auto 0 auto; /* Üstten 15px, sağ-sol otomatik (ortalar) */
    
    /* GENİŞLİK AYARI (Padding yerine bunu kullanıyoruz) */
    width: 90%; 
    max-width: 200px; /* Çok genişlemesini engeller */
    height: 40px;
    
    background: #222;
    border: 1px solid #6b5c3b;
    border-radius: 4px;
    color: #ffd700;
    font-weight: bold;
    
    /* İÇERİĞİ ORTALAMA */
    display: flex;
    align-items: center;
    justify-content: center; /* İkon ve parayı yatayda tam ortalar */
    gap: 10px;
    
    box-shadow: inset 0 0 5px #000;
    padding: 0; /* Eski hatalı padding'i sıfırladık */
}

.paper-doll-right { display: flex; flex-direction: column; gap: 12px; align-items: center; }
.equip-row { display: flex; gap: 10px; justify-content: center; width: 100%; }

.bag-grid { 
    display: grid; grid-template-columns: repeat(4, 60px); gap: 10px; padding: 20px 35px; 
    background: #222; border: 1px solid #3e3221; border-radius: 8px; 
    width: fit-content; min-width: 340px; margin: 20px auto 0 auto; justify-content: center; 
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}
/* Craft Materyali için özel Badge rengi (Metalik Gri/Mavi) */
.badge-craft { 
    background: rgba(45, 62, 80, 0.9) !important; 
    border: 1px solid #7f8c8d !important; 
    color: #ecf0f1 !important;
}

.tier-craft { color: #888 !important; } /* Materyal yazı rengi gri */

.item-count-badge {
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 0.75em;
    background: #2ecc71; /* Yeşil renkli miktar yazısı */
    color: white;
    padding: 1px 4px;
    border-radius: 4px;
    font-weight: bold;
    text-shadow: 1px 1px 1px #000;
    z-index: 6;
    pointer-events: none;
    border: 1px solid rgba(0,0,0,0.5);
}

.item-tier-badge {
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 0.65em;
    background: rgba(0, 0, 0, 0.7);
    color: #ffd700;
    padding: 1px 3px;
    border-radius: 3px;
    pointer-events: none; /* Tıklamayı engellemesin */
    z-index: 5;
	font-family: 'Cinzel', serif;
    font-weight: 900;
}

/* Broş slotu içindeki Tier rozeti özel ayarı */
.brooch-slot .item-tier-badge {
    font-size: 0.5rem !important;
    padding: 0px 2px !important;
    height: 12px !important;
    line-height: 12px !important;
    min-width: 15px !important;
    bottom: 0 !important;
    right: 0 !important;
}

/* İkonun kendisini biraz daha belirgin yapalım */
.brooch-slot img {
    width: 150% !important;
    height: 150% !important;
    filter: drop-shadow(0 0 2px #000);
}

/* Tier Renk Tanımlamaları */
.tier-1 { color: #dcdcdc !important; }
.tier-2 { color: #43ff64 !important; }
.tier-3 { color: #3498db !important; }
.tier-4 { color: #9b59b6 !important; }
.tier-5 { color: #ff9800 !important; }

/* Badge (Küçük Etiket) Arka Planları */
.badge-1 { background: rgba(100, 100, 100, 0.85) !important; border: 1px solid #dcdcdc; }
.badge-2 { background: rgba(20, 100, 20, 0.85) !important; border: 1px solid #43ff64; }
.badge-3 { background: rgba(0, 50, 100, 0.85) !important; border: 1px solid #3498db; }
.badge-4 { background: rgba(60, 0, 100, 0.85) !important; border: 1px solid #9b59b6; }
.badge-5 { background: rgba(120, 60, 0, 0.85) !important; border: 1px solid #ff9800; box-shadow: 0 0 5px #ff9800; }

/* Eşya Slot Çerçeveleri (Opsiyonel: İstersen slotun kenarı da parlar) */
.border-tier-4 { border-color: #9b59b6 !important; }
.border-tier-5 { border-color: #ff9800 !important; box-shadow: inset 0 0 10px rgba(255, 152, 0, 0.3) !important; }

/* ============================================================
   YETENEK KİTABI (K) - NİHAİ YAPI
   ============================================================ */
.skill-book-window { width: 650px; height: 720px; }
.skill-book-header h2 { margin: 0; color: #f0e68c; font-size: 1.5em; border-bottom: 2px solid #6b5c3b; padding-bottom: 10px; margin-bottom: 15px; text-align: center; }
.skill-points-box { background: linear-gradient(145deg, #3e2723, #1b0000); border: 2px solid #f0e68c; padding: 15px; text-align: center; border-radius: 8px; margin-bottom: 20px; color: #fff; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.skill-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
.tab-btn { flex: 1; background: #333; border: 1px solid #555; opacity: 0.7; }
.tab-btn.active { background: #5d4a30; border-color: #f0e68c; opacity: 1; }
.skill-list-container { flex-grow: 1; overflow-y: auto;  -ms-overflow-style: none; scrollbar-width: none; background: #111; padding: 15px; border: 2px inset #3e3221; border-radius: 8px; display:flex; flex-direction:column; }
.skill-list-container::-webkit-scrollbar { display: none; }
.skill-book-item { display: flex; align-items: center; gap: 15px; background: rgba(40, 40, 40, 0.8); padding: 12px; border: 1px solid #444; border-radius: 6px; margin-bottom: 10px; transition: 0.2s; width: 95%; margin-left: auto; margin-right: auto; box-sizing: border-box; }
.skill-book-item:not(.locked) { border: 2px solid #43FF64; }
.skill-book-item.locked { background: #151515; border: 1px solid #444; opacity: 0.7; }
.skill-book-item.locked .skill-book-icon { filter: grayscale(100%) brightness(0.5); }
.skill-book-item.locked .skill-info h4 { color: #666 !important; }
.skill-info h4 { color: #f0e68c !important; font-size: 1.1em; margin-bottom: 4px; text-shadow: 1px 1px 2px #000; }
.skill-info p { font-size: 0.85em; color: #ccc; margin: 0; line-height: 1.3; }
.skill-book-icon { width: 50px; height: 50px; border: 1px solid #000; border-radius: 4px; flex-shrink: 0; }
.equipped-area-title { text-align: center; margin: 20px 0 10px 0; color: #f0e68c; font-size: 1.1em; font-weight: bold; letter-spacing: 3px; text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: 15px; }
.equipped-area-title::before, .equipped-area-title::after { content: ""; height: 1px; width: 60px; background: linear-gradient(90deg, transparent, #6b5c3b, transparent); }
#skill-book-equipped-bar { display: flex; justify-content: center; gap: 12px; padding: 15px 30px; background-color: rgba(15, 15, 15, 0.95); border: 2px solid #6b5c3b; border-radius: 12px; margin-top: 5px; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.8), inset 0 0 15px rgba(0,0,0,0.5); }
#skill-book-equipped-bar .key-hint { position: absolute; top: -4px; left: -4px; background: #444; color: #fff; font-size: 0.7em; padding: 2px 5px; border-radius: 4px; border: 1px solid #777; z-index: 5; }

.skill-book-item.selected-skill {
    border: 2px solid #ffd700 !important; /* Altın sarısı çerçeve */
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.2) !important;
    background: linear-gradient(90deg, rgba(93, 74, 48, 0.4), rgba(26, 21, 14, 0.6)) !important;
    transform: scale(1.02);
}


.item-tooltip {
    position: fixed;
    pointer-events: none;
    background: rgba(10, 10, 10, 0.95);
    border: 2px solid #6b5c3b;
    border-radius: 6px;
    padding: 12px;
    z-index: 9999;
    min-width: 180px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.8);
    color: #fff;
    font-family: 'Cinzel', serif;
}
.tooltip-name { color: #ffd700; font-weight: bold; margin-bottom: 4px; font-family: 'Cinzel', serif; text-transform: uppercase; letter-spacing: 1px; font-size: 1.2rem;}
.tooltip-tier { color: #888; font-size: 0.85em; font-family: 'Cinzel', serif;font-style: normal; letter-spacing: 1px; }
.tooltip-stats { margin-top: 8px; line-height: 1.5; }
.tooltip-stat-row { display: flex; justify-content: space-between; gap: 20px; font-family: 'Cinzel', serif; font-weight: 700; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.5px; }
.tooltip-stats div { font-family: 'Cinzel', serif; font-weight: 700; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px;}
.tooltip-val { color: #43FF64; font-family: 'Cinzel', serif; font-weight: 900;} /* Stat değerleri yeşil */

/* Reforge listesindeki stat isimleri */
.reforge-prop-card span { font-family: 'Cinzel', serif; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;}
/* Maliyet yazıları (Altın, Parça vb.) */
.reforge-costs div {font-family: 'Cinzel', serif; text-transform: uppercase; letter-spacing: 1px;}
/* Sentez ve Parçalama ekranlarındaki durum metinleri */
#fragments-status, .salvage-yield-info div { font-family: 'Cinzel', serif; text-transform: uppercase; letter-spacing: 1px;}

.item-slot.drag-over {
    border-color: #43FF64 !important;
    background-color: rgba(67, 255, 100, 0.1) !important;
    box-shadow: 0 0 15px #43FF64;
}
.item-tooltip .brooch-specialty-text {
    display: block;
    color: #ffd700 !important;
    font-style: italic;
    text-align: center;
    margin-bottom: 12px;
    padding: 6px;
    background: rgba(255, 215, 0, 0.05);
    border-radius: 4px;
    font-family: 'Cinzel', serif;
    
    /* BURADAN BOYUTU AYARLAYABİLİRSİN */
    font-size: 10px !important; 
    line-height: 1.4 !important;
    letter-spacing: 0.5px !important;
    /* ------------------------------ */
}

