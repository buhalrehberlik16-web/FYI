/* ============================================================
   KARAKTER PANELİ GENEL YAPILANDIRMASI (U, I, K)
   ============================================================ */
#skill-book-screen, #stat-screen, #inventory-screen {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); 
    z-index: 3000;
    display: none; 
    justify-content: center; 
    align-items: center;
}

#skill-book-screen:not(.hidden), 
#stat-screen:not(.hidden), 
#inventory-screen:not(.hidden) { 
    display: flex !important; 
}

.stat-window, .skill-book-window, .inventory-window {
    background-color: #2b2b2b;
    border: 3px solid #6b5c3b;
    border-radius: 10px;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
    padding: 25px;
    color: #c0c0c0;
    position: relative;
    display: flex;
    flex-direction: column;
}

/* X ÇIKIŞ BUTONU */
#btn-close-skill-book, #close-stat-screen, #btn-close-inventory {
    position: absolute; 
    top: 12px; 
    right: 12px;
    background: linear-gradient(to bottom, #8b0000, #5a0000); 
    border: 1px solid #ff4d4d; 
    color: #fff;
    width: 32px; 
    height: 32px; 
    cursor: pointer; 
    font-weight: bold;
    display: flex; 
    align-items: center; 
    justify-content: center; 
    z-index: 100;
    border-radius: 4px;
    box-shadow: 0 2px 5px #000;
}

/* ============================================================
   STAT EKRANI (U) - DÜZELTİLMİŞ FONT VE RENK DÜZENİ
   ============================================================ */
.stat-window { 
    width: 480px; 
    background: linear-gradient(180deg, #2b2b2b 0%, #151515 100%) !important; 
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #6b5c3b;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

.stat-window h2 { 
    margin: 0; 
    color: #f0e68c; 
    font-size: 1.5em; 
    text-align: center;
    flex-grow: 1; /* Başlığı ortalar */
}

/* Nickname ve Level Satırı */
.stat-main-info {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    width: 100%;
    padding: 0 5px;
    margin-bottom: 5px;
}

#stat-name { color: #ffd700; font-size: 1.3em; font-weight: bold; text-shadow: 2px 2px 4px #000; }
#stat-class { color: #ffffff !important; font-size: 0.85em; margin-left: 5px; font-weight: normal; }
#stat-level { color: #ffd700; font-weight: bold; font-size: 1.2em; }

/* XP BARI */
.xp-bar-container { position: relative; width: 100%; height: 24px; background-color: #111; border: 1px solid #555; border-radius: 12px; margin-top: 5px; overflow: hidden; box-shadow: inset 0 0 8px #000; }
.xp-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #6a0dad, #9b59b6); box-shadow: 0 0 10px #9b59b6; transition: width 0.4s; }
.xp-bar-text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; font-size: 0.85em; font-weight: bold; color: #fff; text-shadow: 1px 1px 2px #000; z-index: 2; }

/* DAĞITILABİLİR PUAN */
.stat-points-box {
    margin-top: 15px; padding-top: 15px; border-top: 1px solid #6b5c3b;
    text-align: center; font-weight: bold; color: #f0e68c; font-size: 1.1em;
}

.stat-separator { border: 0; height: 1px; width: 100%; margin: 12px 0; background: linear-gradient(to right, transparent, #6b5c3b, transparent); }

/* SALDIRI / DEFANS TABLARI (Font Boyutu Düzeltildi) */
.combat-stats-row { display: flex; justify-content: space-between; gap: 20px; margin: 15px 0; }
.c-stat { 
    flex: 1; padding: 12px; border-radius: 6px; text-align: center; 
    border: 1px solid #444; box-shadow: inset 0 0 10px #000; font-weight: bold; 
}
.c-stat:first-child { background: linear-gradient(145deg, #2a0a0a, #100505); border-color: #8b0000; }
.c-stat:last-child { background: linear-gradient(145deg, #0a1a2a, #050a10); border-color: #004d8b; }

/* Değerlerin Font Boyutu (1.6'dan 1.3'e çekildi) */
.c-stat span { 
    display: block; 
    font-size: 1.3em; /* Değişiklik geldiğinde devleşmemesi için küçültüldü */
    margin-top: 5px; 
}

/* ANA STATLAR (Değişiklik geldiğinde fontun sabit kalması için inherit eklendi) */
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
.stat-item { background: rgba(0,0,0,0.2); padding: 10px 15px; border: 1px solid #3e3221; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }

#stat-str, #stat-dex, #stat-int, #stat-vit, #stat-mp, #stat-level-val {
    color: #ffd700; 
    font-weight: 900; 
    font-size: 1.1em; /* Sabit boyut */
    text-shadow: 1px 1px 0px #3e3221;
}

/* Renkli Spanların (Buff/Debuff) boyutunu ana yazıya eşitle */
.stat-item span span, .c-stat span span {
    font-size: inherit !important; 
    font-weight: inherit !important;
}

.btn-stat-plus { margin-left: 8px; background-color:#145a32; border: 1px solid #145a32; color: white; padding: 10px 10px; border-radius: 4px; cursor: pointer; transition: background-color 0.2s, transform 0.1s; text-transform: uppercase; font-weight: bold; font-family: 'Georgia', serif;}
.btn-stat-plus:hover:not(:disabled) { background-color: #145a00; filter: brightness(1.1); }

/* DİRENÇLER */
.res-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 5px; margin-top: 15px; }
.res-item { background: rgba(0,0,0,0.2); border: 1px solid #3e3221; border-radius: 6px; padding: 10px; display: flex; flex-direction: column; align-items: center; box-shadow: inset 0 0 5px #000; }
.res-item label { font-size: 0.75em; color: #888; margin-bottom: 2px; }
.res-item span:last-child { color: #ffd700; font-weight: bold; text-shadow: 1px 1px 0px #3e3221; font-size: 0.95em; }

.stat-footer { display: none; }

/* ============================================================
   ENVANTER (I) - NİHAİ YERLEŞİM
   ============================================================ */
.inventory-window { width: 620px; background-color: #1a1a1a; }
.inventory-header h3 { margin: 0; color: #f0e68c; font-size: 1.5em; text-align: center; border-bottom: 2px solid #6b5c3b; padding-bottom: 10px; margin-bottom: 15px; }
.inventory-content { display: flex; gap: 30px; justify-content: center; align-items: center; margin-bottom: 10px; }
.char-preview-box { width: 260px; height: 380px; position: relative; border: 1px dashed #6b5c3b; background: rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: flex-end; overflow: hidden; }
#inv-char-img { height: 100%; width: auto; object-fit: contain; transform: translateY(10px); filter: drop-shadow(0 0 10px #000); }
.brooch-overlay { position: absolute; top: 105px; left: 50%; transform: translateX(-50%); display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; width: 90px; z-index: 10; }
.brooch-slot { width: 26px !important; height: 26px !important; background-color: rgba(0, 0, 0, 0.7); border: 1px solid #6b5c3b; border-radius: 4px; }

.inventory-gold-display {
    margin-top: 15px; align-self: center; background: #222; border: 1px solid #6b5c3b; padding: 2% 45%; border-radius: 4px; 
    color: #ffd700; font-weight: bold; display: flex; align-items: center; gap: 10px; box-shadow: inset 0 0 5px #000;
}

.paper-doll-right { display: flex; flex-direction: column; gap: 12px; align-items: center; }
.equip-row { display: flex; gap: 10px; justify-content: center; width: 100%; }

.bag-grid { 
    display: grid; grid-template-columns: repeat(4, 60px); gap: 10px; padding: 20px 35px; 
    background: #222; border: 1px solid #3e3221; border-radius: 8px; 
    width: fit-content; min-width: 340px; margin: 20px auto 0 auto; justify-content: center; 
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}

/* ============================================================
   YETENEK KİTABI (K) - NİHAİ YAPI
   ============================================================ */
.skill-book-window { width: 680px; height: 720px; }
.skill-book-header h2 { margin: 0; color: #f0e68c; font-size: 1.5em; border-bottom: 2px solid #6b5c3b; padding-bottom: 10px; margin-bottom: 15px; text-align: center; }
.skill-points-box { background: linear-gradient(145deg, #3e2723, #1b0000); border: 2px solid #f0e68c; padding: 15px; text-align: center; border-radius: 8px; margin-bottom: 20px; color: #fff; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.skill-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
.tab-btn { flex: 1; background: #333; border: 1px solid #555; opacity: 0.7; }
.tab-btn.active { background: #5d4a30; border-color: #f0e68c; opacity: 1; }
.skill-list-container { flex-grow: 1; overflow-y: auto; background: #111; padding: 20px; border: 2px inset #3e3221; border-radius: 8px; }
.skill-book-item { display: flex; align-items: center; gap: 20px; background: #333; padding: 15px; border: 2px solid #43FF64; border-radius: 10px; margin-bottom: 15px; transition: 0.2s; }
.skill-book-item.locked { background: #151515; border: 2px solid #444; opacity: 0.75; }
.skill-book-item.locked .skill-book-icon { filter: grayscale(100%) brightness(0.6); }
.skill-book-item.locked .skill-info h4 { color: #777 !important; }
.skill-info h4 { color: #f0e68c !important; font-size: 1.3em; margin-bottom: 8px; text-shadow: 2px 2px 4px #000; }
.skill-book-icon { width: 50px; height: 50px; border: 1px solid #000; border-radius: 4px; flex-shrink: 0; }
.equipped-area-title { text-align: center; margin: 20px 0 10px 0; color: #f0e68c; font-size: 1.1em; font-weight: bold; letter-spacing: 3px; text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: 15px; }
.equipped-area-title::before, .equipped-area-title::after { content: ""; height: 1px; width: 60px; background: linear-gradient(90deg, transparent, #6b5c3b, transparent); }
#skill-book-equipped-bar { display: flex; justify-content: center; gap: 12px; padding: 15px 30px; background-color: rgba(15, 15, 15, 0.95); border: 2px solid #6b5c3b; border-radius: 12px; margin-top: 5px; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.8), inset 0 0 15px rgba(0,0,0,0.5); }
#skill-book-equipped-bar .key-hint { position: absolute; top: -4px; left: -4px; background: #444; color: #fff; font-size: 0.7em; padding: 2px 5px; border-radius: 4px; border: 1px solid #777; z-index: 5; }

@media (max-width: 768px) {
    /* Pencereleri ekran genişliğine zorla */
    .stat-window, .skill-book-window, .inventory-window {
        width: 95vw !important;
        max-height: 90vh;
        padding: 15px;
        overflow-y: auto; /* İçerik sığmazsa pencere içinde kaydır */
    }

    /* ENVANTER (I): Karakteri ve Slotları alt alta al */
    .inventory-content {
        flex-direction: column;
        gap: 15px;
    }

    .char-preview-box {
        width: 200px; /* Mobilde biraz küçült */
        height: 300px;
        min-width: 200px;
    }

    /* Çanta Slotlarını Mobilde 4 yerine 3 veya 4 (ekrana göre) sığdır */
    .bag-grid {
        grid-template-columns: repeat(4, 55px);
        padding: 10px;
    }

    /* STAT (U): Statları ve Dirençleri tek sütun yapabilirsin (isteğe bağlı) */
    .stat-grid {
        grid-template-columns: 1fr; /* Mobilde statlar alt alta */
        gap: 8px;
    }

    .res-grid {
        grid-template-columns: repeat(2, 1fr); /* Dirençler 2 sütun */
    }
}