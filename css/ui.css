/* css/ui.css */

/* --- GENEL BUTONLAR --- */
button {
    background-color: #5d4a30; 
    color: #f0e68c; 
    border: 1px solid #7c6843;
    padding: 10px 15px; 
    cursor: pointer; 
    border-radius: 4px; 
    transition: background-color 0.2s, transform 0.1s; 
    text-transform: uppercase;
    font-weight: bold; 
    box-shadow: 0 4px 0 #3e3221;
    font-family: 'Georgia', serif;
}
button:active { transform: translateY(4px); box-shadow: none; }
button:hover:not(:disabled) { background-color: #6d5a3f; filter: brightness(1.1); }
button:disabled { background-color: #383838; color: #777; cursor: not-allowed; box-shadow: none; transform: translateY(2px); }

.skill-button { 
    background-color: #4b305d; 
    border-color: #7c437c; 
    min-width: 120px; 
    height: 50px; 
    box-shadow: 0 4px 0 #2d1d38; 
}
.skill-button:hover:not(:disabled) { background-color: #5a3f6d; }

/* --- ÜST BİLGİ ÇUBUĞU --- */
#top-info-bar {
    position: absolute; top: 0; left: 0; width: 100%; height: 40px;
    background: linear-gradient(to bottom, #111, #222);
    border-bottom: 2px solid #6b5c3b;
    z-index: 200;
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 20px; box-sizing: border-box; box-shadow: 0 2px 10px rgba(0,0,0,0.8);
    color: #fff; font-family: 'Georgia', serif;
}
#top-info-bar.hidden { display: none !important; }

.top-info-item { display: flex; align-items: center; gap: 10px; font-weight: bold; font-size: 1.1em; }
.gold-container { color: gold; text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }

/* --- ANA OYUN ALANI DÜZENİ --- */
#game-container {
    position: relative; display: block; width: 95%; max-width: 1400px; height: 90vh;
    background-color: #2b2b2b; border: 3px solid #6b5c3b; 
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.7); overflow: hidden; 
}
#main-screen-area {
    position: absolute; top: 40px; left: 0; width: 100%; height: calc(100% - 40px); overflow: hidden;
    transition: top 0.3s, height 0.3s;
}

/* --- SKILL VE MENU SLOTLARI --- */
.skill-slot, .menu-slot {
    position: relative; width: 60px; height: 60px;
    background-color: #222; border: 2px solid #555; border-radius: 6px;
    cursor: pointer; transition: all 0.2s; box-shadow: inset 0 0 10px #000;
    display: flex; justify-content: center; align-items: center; overflow: hidden;
}

.skill-slot img, .menu-slot img { width: 100%; height: 100%; border-radius: 4px; object-fit: cover; }
.skill-slot:hover, .menu-slot:hover { border-color: #f0e68c; box-shadow: 0 0 10px #f0e68c; transform: translateY(-2px); }

.skill-slot.disabled { filter: grayscale(100%); cursor: not-allowed; opacity: 0.8; border-color: #444; }
.skill-slot.disabled:hover { transform: none; border-color: #444; box-shadow: none; }

.key-hint {
    position: absolute; top: 2px; left: 2px;
    background: rgba(0, 0, 0, 0.7); color: #fff; font-size: 0.7em;
    padding: 1px 4px; border: 1px solid #777; border-radius: 3px; 
    z-index: 20; pointer-events: none;
}

.drag-over { border-color: #00ff00 !important; background-color: rgba(0, 255, 0, 0.1) !important; box-shadow: 0 0 10px #00ff00 !important; }

/* Cooldown Perdesi */
.cooldown-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; 
    background-color: rgba(0, 0, 0, 0.75); z-index: 15;
    display: flex; justify-content: center; align-items: center;
    transition: height 0.3s ease; pointer-events: none; 
}
.cooldown-text { color: #fff; font-weight: bold; font-size: 1.4em; text-shadow: 0 0 5px #000, 0 0 10px red; }

/* Tooltip */
.skill-tooltip {
    visibility: hidden; position: absolute; bottom: 75px; left: 50%; transform: translateX(-50%);
    width: 200px; background-color: rgba(20, 20, 20, 0.95); border: 1px solid #f0e68c;
    color: #fff; padding: 10px; border-radius: 5px; text-align: left; font-size: 0.85em;
    z-index: 100; opacity: 0; transition: opacity 0.2s; pointer-events: none; box-shadow: 0 5px 15px rgba(0,0,0,0.8);
}
.skill-slot:hover .skill-tooltip { visibility: visible; opacity: 1; }
.tooltip-title { color: #f0e68c; font-weight: bold; font-size: 1.1em; display: block; margin-bottom: 5px; }
.tooltip-cost { color: #3498db; font-weight: bold; display: block; margin-bottom: 5px; }
.tooltip-desc { color: #ccc; display: block; }

/* --- BARLAR --- */
.hp-bar-container { width: 100%; height: 10px; background-color: #600000; border: 1px solid #f0e68c; overflow: hidden; }
.hp-bar { height: 100%; background-color: #3cb371; transition: width 0.3s ease-out; width: 100%; }
.rage-bar-container { margin-top: 5px; background-color: #000060; }
.rage-bar { height: 100%; background-color: #3498db; width: 0%; transition: width 0.3s ease-in-out; }
.rage-text, #hero-hp-text, #monster-hp-text { font-size: 0.7em; display: block; color: #f0e68c; text-shadow: 1px 1px 1px #000; }

/* --- FLOATING TEXT --- */
.floating-text {
    position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
    font-size: 2.5em; font-weight: 900; pointer-events: none; z-index: 100;
    text-shadow: 2px 2px 0px #000; animation: float-up-fade 1.5s ease-out forwards;
}
.damage-text { color: #ff3333; }
.heal-text { color: #43FF64; }
@keyframes float-up-fade {
    0% { opacity: 0; transform: translate(-50%, -20%) scale(0.5); }
    15% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    100% { opacity: 0; transform: translate(-50%, -150%) scale(1); }
}

/* --- KAMP, EVENT, REWARD --- */
#campfire-screen, #event-screen, #reward-screen { background-color: #110a05; color: #ffdcb0; text-align: center; overflow: hidden; }
#event-screen, #reward-screen { background-color: #0f0f15; color: #e0e0e0; justify-content: center; align-items: center; display: flex; }

.event-content, .reward-content {
    max-width: 450px; min-height: 300px; padding: 40px;
    background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
    border: 2px solid #9b59b6; border-radius: 10px; box-shadow: 0 0 30px rgba(155, 89, 182, 0.3);
    display: flex; flex-direction: column; justify-content: center;
}

/* Ödül Ekranı Özel */
.reward-content { border-color: gold; box-shadow: 0 0 30px rgba(255, 215, 0, 0.3); }
.reward-content h2 { color: gold; text-shadow: 0 0 10px orange; margin-top: 0; font-size: 3em; }
.reward-subtitle { color: #aaa; margin-bottom: 20px; }
#reward-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; min-height: 100px; justify-content: center; }

.reward-item {
    background: #333; border: 1px solid gold; padding: 15px; cursor: pointer; border-radius: 5px;
    display: flex; align-items: center; gap: 15px; transition: transform 0.2s;
}
.reward-item:hover { background: #444; transform: scale(1.02); }
.reward-item i { font-size: 1.5em; color: gold; }
.reward-item span { font-weight: bold; font-size: 1.2em; color: #fff; }
.reward-continue-btn { width: 100%; background: #444; border-color: #666; color: #aaa; cursor: default; }
.reward-continue-btn.active { background: #5d4a30; border-color: #f0e68c; color: #f0e68c; cursor: pointer; }

/* Event Ekranı Özel */
#event-title { font-size: 2.5em; color: #9b59b6; margin-bottom: 10px; text-shadow: 0 0 10px #000; }
#event-desc { font-size: 1.1em; margin-bottom: 30px; font-style: italic; color: #aaa; }
#event-choices-container { display: flex; flex-direction: column; gap: 15px; }

.event-btn {
    background: #333; border: 1px solid #555; padding: 15px; cursor: pointer; border-radius: 5px;
    transition: all 0.2s; text-align: left; display: flex; flex-direction: column; gap: 5px;
}
.event-btn:hover { background: #444; border-color: #9b59b6; transform: translateX(5px); }
.choice-title { font-weight: bold; font-size: 1.2em; color: #fff; }
.choice-detail { font-size: 0.9em; color: #ccc; }
.buff { color: #43FF64; font-weight: bold; }
.debuff { color: #ff4d4d; font-weight: bold; }

/* Campfire Efektleri */
.fire-glow-effect {
    position: absolute; bottom: -20%; left: 20%; width: 60%; height: 60%;
    background: radial-gradient(circle, rgba(255,69,0,0.6) 0%, rgba(139,0,0,0.2) 60%, transparent 80%);
    filter: blur(30px); animation: fire-flicker 3s infinite alternate; z-index: 0; pointer-events: none;
}
@keyframes fire-flicker {
    0% { transform: scale(1) translateY(0); opacity: 0.8; }
    50% { transform: scale(0.95) translateY(5px); opacity: 0.7; }
    100% { transform: scale(1) translateY(0); opacity: 0.8; }
}
.campfire-content {
    z-index: 10; position: relative; background: rgba(0, 0, 0, 0.6); padding: 40px;
    border: 2px solid #8b4513; border-radius: 15px; max-width: 500px; box-shadow: 0 0 50px rgba(255, 69, 0, 0.2);
}
#campfire-options { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
#campfire-options button { width: 160px; height: 80px; font-size: 1em; border-color: #ff8c00; }
#campfire-result { margin-top: 30px; animation: fadeIn 0.5s; }
#campfire-result h2 { color: #43FF64; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* PARTİKÜLLER */
.healing-particle {
    position: absolute; width: 20px; height: 20px;
    background-image: url('../images/healing_particles.png'); background-size: contain; background-repeat: no-repeat; background-position: center;
    background-color: transparent; opacity: 0; pointer-events: none;
    animation-name: particle-float; animation-timing-function: ease-out; animation-fill-mode: forwards; 
}
@keyframes particle-float {
    0% { transform: translate(0, 0) scale(0.2) rotate(0deg); opacity: 0; }
    10% { opacity: 1; transform: translate(0, -10px) scale(1) rotate(45deg); }
    100% { opacity: 0; transform: translate(var(--move-x), -180px) scale(0.2) rotate(180deg); }
}

/* Status Icons */
.status-icons { position: absolute; top: -30px; left: 0; width: 100%; display: flex; justify-content: center; gap: 5px; }
.status-icon {
    width: 20px; height: 20px; background-color: #333; border: 1px solid #fff; border-radius: 50%;
    font-size: 10px; display: flex; justify-content: center; align-items: center; color: #fff; cursor: help;
}
.status-buff { border-color: #43FF64; color: #43FF64; }
.status-debuff { border-color: #ff4d4d; color: #ff4d4d; }

/* ÖLÜM EFEKTİ */
#fade-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: black; opacity: 0; z-index: 100; pointer-events: none; transition: opacity 2.5s ease-in;
}
#fade-overlay.active-fade { opacity: 1; }

/* --- PENCERE SİSTEMLERİ --- */
#skill-book-screen, #stat-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.7); z-index: 300;
    display: none; justify-content: center; align-items: center;
}
#skill-book-screen:not(.hidden), #stat-screen:not(.hidden) { display: flex; }

.skill-book-window, .stat-window {
    width: 600px; background-color: #2b2b2b; border: 3px solid #6b5c3b;
    border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.9); display: flex; flex-direction: column; padding: 20px; color: #c0c0c0;
}
.stat-window { width: 450px; } 

.skill-book-header, .stat-header {
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 2px solid #444; padding-bottom: 10px; margin-bottom: 15px;
}
.skill-book-header h2, .stat-header h2 { margin: 0; color: #f0e68c; }

.close-btn {
    width: 30px; height: 30px; padding: 0; background: #8b0000; border: 1px solid #ff4d4d; color: white;
    display: flex; justify-content: center; align-items: center; cursor: pointer;
}

/* Skill Book İçerik */
.skill-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
.tab-btn { flex: 1; background: #333; border-color: #555; opacity: 0.7; }
.tab-btn.active { background: #5d4a30; border-color: #f0e68c; opacity: 1; box-shadow: 0 0 10px rgba(240, 230, 140, 0.3); }

.skill-list-container { flex-grow: 1; overflow-y: auto; background: #222; padding: 10px; border: 1px inset #111; height: 300px; }
.hint-text { color: #888; font-size: 0.8em; text-align: center; margin-top: 0; margin-bottom: 10px; }
.skill-grid { display: flex; flex-direction: column; gap: 10px; }

.skill-book-item {
    display: flex; align-items: center; gap: 15px;
    background: #333; padding: 10px; border: 1px solid #444; border-radius: 5px;
    cursor: grab; transition: background 0.2s;
}
.skill-book-item:hover { background: #3a3a3a; border-color: #666; }
.skill-book-item:active { cursor: grabbing; }
.skill-book-icon { width: 50px; height: 50px; border: 1px solid #000; border-radius: 4px; object-fit: cover; flex-shrink: 0; }
.skill-info h4 { margin: 0 0 5px 0; color: #f0e68c; font-size: 1.1em; }
.skill-info p { margin: 0; font-size: 0.85em; color: #ccc; line-height: 1.3; }

/* YENİ HALİ */
.skill-book-item.locked { 
    background: #1a1a1a; 
    border-color: #333; 
    /* opacity: 0.5;  <-- Bunu kaldırdık çünkü butonu da şeffaflaştırıyordu */
    cursor: default; 
    /* filter: grayscale(100%); <-- SORUNLU KOD BUYDU, KALDIRDIK */
}

/* Sadece kilitli öğenin ikonunu gri yap */
.skill-book-item.locked .skill-book-icon {
    filter: grayscale(100%);
    opacity: 0.5;
}

/* Kilitli öğenin yazılarını soluklaştır */
.skill-book-item.locked .skill-info h4,
.skill-book-item.locked .skill-info p {
    color: #666; /* Gri yazı rengi */
}

/* Ancak butonun canlı ve tıklanabilir görünmesini sağla */
.skill-book-item.locked .btn-learn-skill {
    opacity: 1 !important;
    filter: none !important;
    cursor: pointer;
}

/* (KİLİTLİ) yazısının rengini koru */
.skill-book-item.locked .skill-info h4::after { 
    content: " (KİLİTLİ)"; 
    color: #a04040; /* Biraz daha koyu kırmızı yaptık ki gri temaya uysun */
    font-size: 0.8em; 
    margin-left: 10px; 
}

.skill-book-item.locked:hover { 
    background: #1a1a1a; 
    border-color: #333; 
}

/* Menü İçindeki Alt Bar */
.equipped-area-title {
    margin-top: 15px; margin-bottom: 5px; font-size: 0.9em; color: #888;
    text-align: center; border-top: 1px solid #444; padding-top: 10px; letter-spacing: 1px;
}
#skill-book-equipped-bar {
    display: flex; justify-content: center; gap: 15px; padding: 10px;
    background: #222; border-radius: 8px; border: 1px solid #444;
}

/* --- STAT EKRANI GÜZELLEŞTİRME --- */
.stat-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.1em; }
.stat-row.main-info { font-weight: bold; color: #fff; font-size: 1.3em; }

/* Savaş Statları (Atak/Defans) - Şık Kutular */
.combat-stats-row {
    display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;
}
.c-stat {
    flex: 1; 
    background: linear-gradient(145deg, #2b2b2b, #1a1a1a);
    padding: 15px; 
    border-radius: 6px; 
    border: 1px solid #444; 
    text-align: center;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    font-size: 1.1em; color: #ccc; font-weight: bold;
}
.c-stat span { display: block; color: #fff; margin-top: 5px; font-size: 1.5em; text-shadow: 0 0 5px rgba(255,255,255,0.2); }

/* Temel Statlar Grid */
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }

.stat-item { 
    background: #2b2b2b; padding: 10px 15px; border-radius: 6px; 
    display: flex; justify-content: space-between; align-items: center;
    border: 1px solid #444; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.stat-item.highlight { border-color: #555; }
.stat-item label { color: #aaa; font-size: 0.9em; font-weight: 600; }
.stat-item span { color: #f0e68c; font-weight: bold; font-size: 1.1em; }

.stat-val-group { display: flex; align-items: center; gap: 10px; }

/* + BUTONU GÜZELLEŞTİRME */
.btn-stat-plus, .btn-learn-skill {
    width: 26px; height: 26px; padding: 0; 
    background: linear-gradient(to bottom, #27ae60, #1e8449); /* Yeşil Gradyan */
    border: 1px solid #145a32;
    color: white; font-size: 16px; font-weight: bold; line-height: 1;
    display: flex; justify-content: center; align-items: center;
    border-radius: 4px; cursor: pointer;
    box-shadow: 0 2px 0 #145a32; /* 3D Efekt */
    transition: all 0.1s;
}
.btn-stat-plus:hover, .btn-learn-skill:hover { filter: brightness(1.2); transform: translateY(-1px); }
.btn-stat-plus:active, .btn-learn-skill:active { transform: translateY(2px); box-shadow: none; }
.btn-stat-plus.hidden { display: none !important; }

/* Kalan Puan Kutusu */
.stat-points-box, .skill-points-box {
    background-color: #3e2723; border: 2px solid #f0e68c; padding: 12px;
    text-align: center; border-radius: 6px; color: #fff; font-weight: bold; font-size: 1.1em;
    margin: 15px 0; box-shadow: 0 0 15px rgba(240, 230, 140, 0.2);
}
.stat-points-box.hidden { display: none !important; }

.stat-footer { margin-top: 20px; text-align: center; font-size: 0.8em; color: #666; }
.tier-badge { position: absolute; bottom: 0; right: 0; background-color: #333; color: #ffd700; font-size: 0.7em; padding: 1px 3px; border-radius: 2px; border: 1px solid #ffd700; font-weight: bold; z-index: 5; }
/* --- KÖY (TOWN) ARAYÜZÜ --- */
/* 1. Town Screen (Dış Çerçeve) */
/* İçeriği (Resmi) tam ortada tutmak için Flexbox kullanıyoruz */
#town-screen {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    padding: 0;
    background-color: #000; /* Kenarlarda kalan boşluk siyah olsun */
    overflow: hidden;
}

/* 2. Town Container (Resim ve Butonların Kutusu) */
/* BURASI KRİTİK: Kutu her zaman 16:9 oranında kalacak */
.town-container {
    position: relative;
    
    /* Genişlik ve Yükseklik sınırları */
    width: 100%;
    height: 100%;
    
    /* En-Boy Oranını Kilitle (1920 / 1080 = 16 / 9) */
    /* Tarayıcı ne olursa olsun bu kutu hep 16:9 kalır */
    aspect-ratio: 16 / 9; 
    
    /* Ekrana sığdırma mantığı: */
    /* Genişliğe sığdır ama yüksekliği taşma */
    max-width: 100%;
    max-height: 100%;
    
    /* Eğer ekran çok genişse (Ultra-wide) yanlara yayılma, ortada kal */
    /* Eğer ekran çok dikse (Mobil) aşağı taşma, küçül */
    margin: auto;
    
    border: none;
    box-shadow: 0 0 50px rgba(0,0,0,0.8); /* Şık bir gölge */
}

/* 3. Arka Plan Resmi */
.town-background {
    width: 100%;
    height: 100%;
    
    /* Artık kutu zaten 16:9 olduğu için 'contain' diyerek tam oturtuyoruz */
    object-fit: contain; 
    
    position: absolute;
    top: 0; left: 0;
    z-index: 0;
}

/* Tıklama Alanı (Görünmez Kutu) */
.town-building {
    position: absolute;
    cursor: pointer;
    
    width: auto !important;
    height: auto !important;
    padding: 15px; /* Tıklama alanını yazıdan biraz geniş tut */
    
    display: flex;
    justify-content: center;
    align-items: center;
    
    border: none;
    background: transparent;
    box-shadow: none;
    z-index: 5;
    transition: transform 0.2s ease;
}

/* Binanın üzerine gelince hafifçe büyümesi (Opsiyonel, istemezsen silebilirsin) */
.town-building:hover {
    transform: scale(1.05);
}

/* Bina İsim Yazısı */
.town-label-text {
    color: #e0d0b0; /* Parşömen/Kemik rengi (Okunaklı) */
    font-family: 'Georgia', serif; /* Veya 'Times New Roman' */
    font-size: 1.1em; /* Biraz büyük olsun */
    font-weight: 900; /* Kalın */
    letter-spacing: 2px; /* Harf aralığı */
    
    /* Güçlü Siyah Dış Hat (Yazının her zeminde okunmasını sağlar) */
    text-shadow: 
        2px 2px 0 #000, 
       -1px -1px 0 #000,  
        1px -1px 0 #000,
       -1px 1px 0 #000,
        1px 1px 0 #000;
        
    pointer-events: none; /* Tıklamayı engelleme, alttaki div alsın */
    transition: all 0.3s ease;
}

/* Hover (Üzerine Gelince) Efekti */
.town-building:hover .town-label-text {
    color: #ffd700; /* Altın Sarısı */
    
    /* Glow (Parlama) Efekti */
    text-shadow: 
        0 0 10px #ffd700, 
        0 0 20px #ff8c00, 
        2px 2px 0 #000; /* Siyah konturu koru */
}
/* --- BİNA KONUMLARI (GÖRSELİNE GÖRE AYARLA!) --- */

/* 1. Han (Sol Alt) */
#building-inn {
    bottom: 42.2%;
    left: 44%;
    width: 15%;
    height: 30%;
    font-size: 0.86vw;
}

/* 2. Demirci (Sol Orta) */
#building-blacksmith {
    bottom: 37.4%;
    left: 16%;
    width: 30%;
    height: 35%;
    font-size: 0.76vw;
}

/* 3. Tüccar (Merkez) */
#building-merchant {
    bottom: 40.1%;
    left: 61.0%;
    width: 15%;
    height: 25%;
    font-size: 0.6vw;
}

/* 4. Simyacı (Sağ Orta) */
#building-alchemist {
    bottom: 57.4%;
    right: 16.4%;
    width: 15%;
    height: 35%;
    font-size: 0.67vw;
}

/* 5. Ahır (Sağ Alt/Köşe) */
#building-stable {
    bottom: 37.5%;
    right: 6.2%;
    width: 15%;
    height: 25%;
    font-size: 0.9vw;
}
#building-inn .town-label-text { transform: rotate(351deg); }
#building-blacksmith .town-label-text { transform: rotate(349deg); }
#building-merchant .town-label-text { transform: rotate(10deg); }
#building-stable .town-label-text { transform: rotate(10deg); }

/* Çıkış Butonu */
.town-exit-btn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    z-index: 100;
    background-color: #8b0000;
    border-color: #ff4d4d;
    color: white;
    padding: 10px 30px;
    font-size: 1.2em;
}
.town-exit-btn:hover {
    background-color: #a00000;
}
.levelup-halo {
    position: absolute;
    left: 50%;
    /* Başlangıç noktası (ayaklar) */
    bottom: 0; 
    
    /* Halkanın Boyutları (Karakterin genişliğine göre ayarlı) */
    width: 160px; 
    height: 40px; 
    
    /* Halka Görünümü */
    background: transparent; /* İçi boş */
    border: 4px solid #ffd700; /* Altın kenarlık */
    border-radius: 50%; /* Oval şekil (Perspektif için) */
    
    /* Parlama Efektleri */
    box-shadow: 
        0 0 15px #ffd700,        /* Dış parlama */
        inset 0 0 15px #ffd700;  /* İç parlama */
    
    /* Tıklamayı engelle ve diğer öğelerin üstünde dur */
    pointer-events: none;
    z-index: 50;
    
    /* Animasyon */
    animation: levelUpScan 1.5s ease-out forwards;
    
    /* Merkezleme */
    transform: translateX(-50%);
}

@keyframes levelUpScan {
    0% {
        bottom: 0; /* Ayaklarda başla */
        opacity: 0;
        width: 10px; /* Çok küçük bir nokta olarak başla */
        height: 5px;
    }
    10% {
        opacity: 1; /* Hemen parla */
        width: 160px; /* Gerçek boyutuna ulaş */
        height: 40px;
    }
    80% {
        opacity: 0.5;
    }
    100% {
        bottom: 100%; /* Karakterin boyunu aş */
        opacity: 0;   /* Kaybol */
        width: 180px; /* Yukarı çıkarken hafifçe genişle */
        height: 50px;
        border-color: #fff; /* Sona doğru beyaza çalsın */
    }
}
/* --- MOBİL UYUMLULUK (UI) --- */
@media (max-width: 768px) {
    /* Üst Bilgi Çubuğu */
    #top-info-bar {
        height: 50px;
        padding: 0 10px;
        font-size: 0.9em;
    }

    /* Stat ve Skill Pencereleri (Pop-up) */
    .stat-window, .skill-book-window {
        width: 95%; /* Ekranın tamamını kaplasın */
        height: 80%; /* Yüksekliği sınırla */
        padding: 10px;
        overflow-y: auto; /* İçerik taşarsa kaydır */
    }

    .skill-list-container {
        height: 200px; /* Liste çok uzamasın */
    }

    /* Butonlar */
    button {
        padding: 12px; /* Dokunmatik için daha geniş alan */
    }

    /* Font Ayarları */
    h1 { font-size: 1.5em; }
    h2 { font-size: 1.2em; }
    p { font-size: 0.9em; }
    
    /* Town (Köy) Binaları */
    .building-label {
        font-size: 0.7em;
        padding: 2px 5px;
        /* Mobilde hover olmadığı için isimler hep görünsün mü? */
        opacity: 1 !important; 
        transform: translateY(0) !important;
        background-color: rgba(0,0,0,0.6);
    }
}
#top-nav-menu {
    display: flex;
    gap: 10px;
    align-items: center;
}

.nav-btn {
    background: linear-gradient(to bottom, #4a3b2a, #2b2218);
    border: 1px solid #7c6843;
    color: #f0e68c;
    padding: 5px 12px;
    font-size: 0.85em;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 2px 0 #1a150e;
    transition: all 0.1s;
    height: 30px; /* Sabit yükseklik */
}

.nav-btn:hover {
    background: linear-gradient(to bottom, #5d4a35, #3e3221);
    border-color: #f0e68c;
    transform: translateY(-1px);
}

.nav-btn:active {
    transform: translateY(2px);
    box-shadow: none;
}

/* --- MOBİL UYUM (Sadece İkon Göster, Yazıyı Gizle) --- */
@media (max-width: 600px) {
    .nav-text {
        display: none; /* Mobilde (K) ve (U) yazılarını gizle */
    }
    .nav-btn {
        padding: 5px 10px; /* Sadece ikon kalsın */
    }
    #top-nav-menu {
        gap: 5px;
    }
}
#inventory-screen {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Arka planı hafif karart */
    z-index: 400; /* En üstte olsun */
    display: flex;
    justify-content: center;
    align-items: center;
}

#inventory-screen.hidden { display: none; }

.inventory-window {
    width: 400px; /* Kompakt yapı */
    background: #1a1a1a;
    border: 2px solid #6b5c3b;
    border-radius: 5px;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    display: flex;
    flex-direction: column;
    padding: 20px;
    color: #c0c0c0;
    font-family: 'Georgia', serif;
}

.inventory-header {
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 2px solid #444; padding-bottom: 5px; margin-bottom: 10px;
}
.inventory-header h3 { margin: 0; color: #f0e68c; font-size: 1.1em; }

/* İçerik Düzeni (Yan Yana) */
.inventory-content {
    display: flex;
    gap: 25px;
    justify-content: center;
}

/* Sol Panel (Karakter) */
.paper-doll-left {
    display: flex; flex-direction: column; align-items: center; gap: 10px;
}
.char-preview-box {
    /* Sabit Boyutlar */
    width: 240px;
    height: 360px;
    
    /* YENİ: Sıkışmayı Önle (Kilit Nokta) */
    min-width: 240px; 
    min-height: 360px;
    flex-shrink: 0; /* Flex yapısında asla küçülmesin */
    
    background: transparent;
    border: 1px dashed #444; 
    
    display: flex; 
    justify-content: center; 
    align-items: flex-end; 
    overflow: hidden;
    margin-bottom: 10px;
    padding: 5px;
    box-sizing: border-box;
    
    /* YENİ: İçindeki mutlak pozisyonlu öğeler burayı referans alsın */
    position: relative; 
}
.char-preview-box img { width: 100%; height: 100%; 
object-fit: cover; 
object-position: center bottom;
pointer-events: none; }

.inventory-gold-display {
    background: #222; border: 1px solid #444;
    padding: 5px 10px; border-radius: 4px; width: 100%; box-sizing: border-box;
    text-align: center; color: gold; font-weight: bold;
}

/* Sağ Panel (Slotlar) */
.paper-doll-right {
    display: flex; flex-direction: column; gap: 12px; justify-content: center;
}
.equip-row {
    display: flex; justify-content: center; gap: 15px;
}

/* Slot Tasarımı */
.item-slot {
    width: 50px; height: 50px;
    background-color: #2b2b2b;
    border: 1px solid #555;
    box-shadow: inset 0 0 5px #000;
    cursor: pointer;
    display: flex; justify-content: center; align-items: center;
    transition: border-color 0.2s;
}
.item-slot:hover { border-color: #f0e68c; }
.item-slot img { width: 42px; height: 42px; pointer-events: none; }

/* Slot Arka Plan Placeholderları (İsteğe bağlı CSS ile ikon ekleme) */
.equip-slot[data-slot^="earring"] { background-image: url('data:image/svg+xml;utf8,<svg ...>...</svg>'); /* İleride ikon konabilir */ }

/* Çanta Alanı */
.bag-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 sütun */
    grid-template-rows: repeat(2, 1fr);    /* 2 satır */
    gap: 8px;
    justify-content: center;
    padding: 10px;
    background: #111;
    border: 1px inset #444;
}
/* --- SLOT ARKA PLAN İKONLARI (PLACEHOLDERS) --- */

/* Tüm slotlar için ortak ayar: Silik gri ikon, ortalanmış */
.equip-slot {
    background-repeat: no-repeat;
    background-position: center;
    background-size: 60%; /* İkon slotun %60'ı kadar olsun */
    background-color: #222; /* Slotun kendi rengi */
}

/* 1. KÜPE (Earring) - Damla Şekli */
.equip-slot[data-slot^="earring"] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23555'%3E%3Cpath d='M12 22c4.97 0 9-4.03 9-9c0-4.97-9-13-9-13S3 8.03 3 13c0 4.97 4.03 9 9 9z'/%3E%3Ccircle cx='12' cy='10' r='2' fill='%23333'/%3E%3C/svg%3E");
}

/* 2. KOLYE (Necklace) - Zincir Şekli */
.equip-slot[data-slot="necklace"] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2'%3E%3Cpath d='M8 4v2a2 2 0 002 2h4a2 2 0 002-2V4' /%3E%3Cpath d='M12 14l-3 4h6l-3-4z' fill='%23555' stroke='none'/%3E%3Ccircle cx='12' cy='13' r='5' stroke='%23555'/%3E%3C/svg%3E");
}

/* 3. KEMER (Belt) - Dikdörtgen Şekli */
.equip-slot[data-slot="belt"] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23555'%3E%3Cpath d='M4 10h16v4H4z'/%3E%3Cpath d='M10 9h4v6h-4z' fill='%23333'/%3E%3C/svg%3E");
}

/* 4. YÜZÜK (Ring) - Halka Şekli */
.equip-slot[data-slot^="ring"] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='3'%3E%3Ccircle cx='12' cy='12' r='7' /%3E%3Cpath d='M12 5v-2' stroke-width='1'/%3E%3C/svg%3E");
}

/* Eşya takıldığında (içinde img varsa) arka plan ikonunu biraz daha silik yap veya gizle */
.equip-slot:not(:empty) {
    background-image: none !important; /* İtem resmi gelince arkadaki ikonu kaldır */
}
/* Broş Konteyneri (Izgara) */
.brooch-overlay {
    position: absolute;
    
    /* DİKEY KONUM (Piksel olarak sabit) */
    /* 360px yüksekliğin %32'si yaklaşık 115px eder. */
    top: 90px; 
    
    /* YATAY KONUM (Tam Orta) */
    left: 50%;
    transform: translateX(-50%); /* Geometrik olarak tam merkeze oturtur */
    
    /* İNCE AYAR (OPTICAL ALIGNMENT) */
    /* Eğer karakterin göğsü görselde biraz soldaysa/sağdaysa burayı değiştir */
    /* Örn: Sağa kaydırmak için 5px, Sola kaydırmak için -5px */
    margin-left: -5px; 
    margin-top: 0px; 

    /* Grid Yapısı */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
    
    gap: 3px; 
    z-index: 10;
    
    /* Genişlik */
    width: 82px; 
}

/* Broş Slotları (Küçük Kareler) */
.brooch-slot {
    width: 25px;  /* Normal slotlardan küçük (18px) */
    height: 25px;
    
    background-color: rgba(0, 0, 0, 0.4); /* Yarı saydam siyah */
    border: 1px solid #6b5c3b; /* Altınımsı çerçeve */
    border-radius: 4px; /* Hafif yuvarlak */
    
    box-shadow: inset 0 0 5px #000;
    cursor: pointer;
    transition: all 0.2s;
}

.brooch-slot:hover {
    border-color: #ffd700;
    background-color: rgba(255, 215, 0, 0.3);
	transform: scale(1.1);
	z-index:20;
}

/* Broş Slotu içindeki resim */
.brooch-slot img {
    width: 25px;
    height: 25px;
    object-fit: contain;
}

/* Boş Broş Slotu (İsteğe bağlı minik bir nokta koyabiliriz) */
.brooch-slot:empty::after {
    content: '+';
    color: #888;
    font-size: 14px; /* Font büyütüldü */
    line-height: 1;
    opacity: 0.5;
}
/* Skill Seçim Ekranı */

/* css/ui.css - YENİ SEÇİM EKRANI */

.split-selection-container {
    display: flex;
    gap: 40px;
    justify-content: center;
    width: 100%;
    margin: 20px 0;
}

.selection-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 45%;
}

.skill-column-grid {
    display: flex;
    flex-direction: column; /* Kartlar alt alta */
    gap: 15px;
    width: 100%;
    align-items: center;
}

/* Kart Tasarımı (Eskisiyle benzer ama genişlik ayarlı) */
.selection-card {
    background: #222;
    border: 2px solid #444;
    border-radius: 8px;
    width: 80%;
    padding: 10px;
    cursor: pointer;
    text-align: left; /* Yazılar solda */
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 15px;
}

.selection-card img {
    width: 48px;
    height: 48px;
    border-radius: 4px;
}

.selection-card:hover {
    border-color: #aaa;
    transform: translateX(5px);
}

/* Seçili Durum */
.selection-card.selected {
    border-color: #ffd700;
    background: rgba(255, 215, 0, 0.1);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
}

/* Mobil Uyumu */
@media (max-width: 768px) {
    .split-selection-container {
        flex-direction: column;
    }
    .selection-column {
        width: 100%;
    }
}
/* Basic Slotları (A/D) Normalden biraz ayır */
.basic-menu-slot {
    border-color: #cd7f32 !important; /* Bronz çerçeve */
    margin-right: 5px; /* Sağındakilerle mesafe */
}

/* Slotların boyutunu biraz küçültelim ki 6 tane sığsın */
.menu-slot {
    width: 50px; /* 60px'den düştü */
    height: 50px;
    background-color: #222; 
    border: 2px solid #555; 
    border-radius: 6px;
    cursor: pointer; 
    transition: all 0.2s; 
    box-shadow: inset 0 0 10px #000;
    display: flex; 
    justify-content: center; 
    align-items: center; 
    position: relative;
}

.menu-slot img { 
    width: 100%; 
    height: 100%; 
    border-radius: 4px; 
    object-fit: cover; 
}

/* Key Hint (A, D, 1, 2...) Pozisyonu */
.menu-slot .key-hint {
    position: absolute;
    top: -4px;
    left: -4px;
    background: #444;
    color: #fff;
    font-size: 0.7em;
    padding: 2px 5px;
    border-radius: 4px;
    border: 1px solid #777;
    z-index: 5;
}

/* --- NPC MODALLARI (PENCERELER) --- */
/* Modalın Arka Planı (Tüm ekranı karartan siyahlık) */
.npc-modal {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 500;
    display: flex;
    justify-content: center;
    align-items: center;
}
.npc-modal.hidden { display: none; }

.npc-window {
    width: 1280px;
    height: 900px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    background-color: transparent !important;
    position: relative;
}

/* --- ORTAK STİLLER (Renkli, Fontlu kısımlar) --- */
/* Bu kısımlar tüm NPC'ler için aynı kalır, sadece yerleri değişir */

.npc-title {
    position: absolute;
    width: 100%;
    text-align: center;
    color: #3e2723;
    font-weight: 900;
    font-size: 1.8em;
    font-family: 'Times New Roman', serif;
    text-transform: uppercase;
    text-shadow: 0 1px 0 rgba(255,255,255,0.4);
    pointer-events: none;
}

.npc-actions-left, .npc-actions-right {
    position: absolute;
    width: 140px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.npc-dialogue {
    position: absolute;
    width: 30%;
    text-align: center;
    color: #5d4037;
    font-weight: bold;
    font-size: 0.8em;
    font-style: italic;
    line-height: 1.2;
    left: 50%;
    transform: translateX(-50%); /* Yatayda hep ortalı */
}

/* ============================================================
   HER BİNA İÇİN ÖZEL KONUMLANDIRMA (BURAYI DÜZENLEYECEKSİN)
   ============================================================ */

/* --- 1. HAN (INN) --- */
#modal-inn .npc-title {
    top: 185px; /* Han için Başlık Yüksekliği */
}
#modal-inn .npc-actions-left {
    top: 300px; left: 300px; /* Sol Butonlar */
}
#modal-inn .npc-actions-right {
    top: 300px; right: 310px; /* Sağ Butonlar */
}
#modal-inn .npc-dialogue {
    bottom: 170px; /* Alt Yazı */
}

/* --- 2. DEMİRCİ (BLACKSMITH) --- */
#modal-blacksmith .npc-title {
    top: 170px; /* Örn: Demirci başlığı biraz daha aşağıda */
}
#modal-blacksmith .npc-actions-left {
    top: 300px; left: 295px; /* Örn: Sütunlar daha aşağıda */
}
#modal-blacksmith .npc-actions-right {
    top: 300px; right: 300px;
}
#modal-blacksmith .npc-dialogue {
    bottom: 175px;
}

/* --- 3. TÜCCAR (MERCHANT) --- */
#modal-merchant .npc-title {
    top: 185px;
}
#modal-merchant .npc-actions-left {
    top: 300px; left: 303px;
}
#modal-merchant .npc-actions-right {
    top: 300px; right: 310px;
}
#modal-merchant .npc-dialogue {
    bottom: 180px;
}

/* --- 4. SİMYACI (ALCHEMIST) --- */
#modal-alchemist .npc-title {
    top: 170px;
}
#modal-alchemist .npc-actions-left {
    top: 300px; left: 295px;
}
#modal-alchemist .npc-actions-right {
    top: 300px; right: 300px;
}
#modal-alchemist .npc-dialogue {
    bottom: 175px;
}

/* --- 5. AHIR (STABLE) --- */
#modal-stable .npc-title {
    top: 182px;
}
#modal-stable .npc-actions-left {
    top: 300px; left: 305px;
}
#modal-stable .npc-actions-right {
    top: 300px; right: 310px;
}
#modal-stable .npc-dialogue {
    bottom: 180px;
}

/* --- BUTON STİLİ (GENEL) --- */
.npc-btn {
    background: linear-gradient(to bottom, #5d4a30, #3e2b18);
    border: 2px solid #a67c52;
    color: #fff8dc;
    width: 100%;
    padding: 10px 0;
    font-size: 0.9em;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.6);
    border-radius: 6px;
    transition: transform 0.1s;
    text-shadow: 1px 1px 0 #000;
}

.npc-btn:hover {
    background: #7a5e3d;
    border-color: #ffd700;
    transform: scale(1.05);
}